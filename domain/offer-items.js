const AVAILABLE_FACETS_SELECT_OPTIONS = {
  17: {
    id: '17',
    label: `
            <span class="facet-option">
               <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M10.0938 0.550781V4.91445" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M10.0938 15.0273V19.391" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M3.51172 3.30859L6.56015 6.39421" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M13.625 13.5469L16.6734 16.6325" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M0.785156 9.97266H5.09625" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M15.0898 9.97266H19.4009" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M3.51172 16.6325L6.56015 13.5469" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M13.625 6.39421L16.6734 3.30859" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0932 0.550781C15.2339 0.550781 19.4013 4.76896 19.4013 9.97234C19.4013 15.1757 15.2339 19.3939 10.0932 19.3939C4.95252 19.3939 0.785156 15.1757 0.785156 9.97234C0.785156 4.76896 4.95252 0.550781 10.0932 0.550781Z" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0853 5.01172L13.5525 6.4552L14.9958 9.95735L13.5697 13.4668L10.1097 14.9278L6.64255 13.4843L5.19922 9.98214L6.62521 6.47266L10.0853 5.01172Z" stroke="#A7A7A7" stroke-width="0.636364"/>
              </svg>
              <span>17 граней</span>
            </span>`,
  },

  57: {
    id: '57',
    label: `
            <span class="facet-option">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                <g clip-path="url(#clip0_2076_5875)">
                  <path d="M6.35938 19.6575L7.17143 17.529L10.0891 16.3125L12.8208 17.5639L13.6659 19.8736" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M18.6902 14.6041L16.6129 13.7719L15.4258 10.7822L16.6469 7.98303L18.901 7.11719" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M13.8378 2.07944L13.0257 4.20789L10.1081 5.42442L7.37632 4.17305L6.53125 1.86328" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M1.47257 6.96484L3.54974 7.79695L4.73695 10.7866L3.51574 13.5858L1.26172 14.4518" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M12.9375 4.33594H16.5322V7.89909" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M12.9375 17.5358H16.5322V13.9727" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M7.22358 4.33594H3.62891V7.89909" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M7.22358 17.5358H3.62891V13.9727" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0971 1.45312C15.2378 1.45312 19.4052 5.72338 19.4052 10.991C19.4052 16.2586 15.2378 20.5289 10.0971 20.5289C4.95642 20.5289 0.789062 16.2586 0.789062 10.991C0.789062 5.72338 4.95642 1.45312 10.0971 1.45312Z" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M0.859375 10.9411L3.72772 7.8467L10.0681 5.33984L16.5951 8.11085L19.2354 10.9534" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M0.859375 10.7741L3.72772 13.8685L10.0681 16.3753L16.5951 13.6043L19.2354 10.7617" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M10.1303 20.2752L7.11051 17.3359L4.66406 10.8391L7.3683 4.15096L10.1424 1.44531" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M9.96908 20.2752L12.9889 17.3359L15.4354 10.8391L12.7311 4.15096L9.95703 1.44531" stroke="#A7A7A7" stroke-width="0.636364"/>
                </g>
                <defs>
                  <clipPath id="clip0_2076_5875">
                    <rect width="20" height="20" fill="white" transform="translate(0.00390625 0.992188)"/>
                  </clipPath>
                </defs>
              </svg>
              <span>57 граней</span>
            </span>`,
  },

  '17,57': {
    id: '17,57',
    label: `<span class="facet-option facet-option--inline">
               <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M10.0938 0.550781V4.91445" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M10.0938 15.0273V19.391" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M3.51172 3.30859L6.56015 6.39421" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M13.625 13.5469L16.6734 16.6325" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M0.785156 9.97266H5.09625" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M15.0898 9.97266H19.4009" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M3.51172 16.6325L6.56015 13.5469" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path d="M13.625 6.39421L16.6734 3.30859" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0932 0.550781C15.2339 0.550781 19.4013 4.76896 19.4013 9.97234C19.4013 15.1757 15.2339 19.3939 10.0932 19.3939C4.95252 19.3939 0.785156 15.1757 0.785156 9.97234C0.785156 4.76896 4.95252 0.550781 10.0932 0.550781Z" stroke="#A7A7A7" stroke-width="0.636364"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0853 5.01172L13.5525 6.4552L14.9958 9.95735L13.5697 13.4668L10.1097 14.9278L6.64255 13.4843L5.19922 9.98214L6.62521 6.47266L10.0853 5.01172Z" stroke="#A7A7A7" stroke-width="0.636364"/>
              </svg>
              <span>17 и</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                <g clip-path="url(#clip0_2076_5875)">
                  <path d="M6.35938 19.6575L7.17143 17.529L10.0891 16.3125L12.8208 17.5639L13.6659 19.8736" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M18.6902 14.6041L16.6129 13.7719L15.4258 10.7822L16.6469 7.98303L18.901 7.11719" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M13.8378 2.07944L13.0257 4.20789L10.1081 5.42442L7.37632 4.17305L6.53125 1.86328" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M1.47257 6.96484L3.54974 7.79695L4.73695 10.7866L3.51574 13.5858L1.26172 14.4518" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M12.9375 4.33594H16.5322V7.89909" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M12.9375 17.5358H16.5322V13.9727" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M7.22358 4.33594H3.62891V7.89909" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M7.22358 17.5358H3.62891V13.9727" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0971 1.45312C15.2378 1.45312 19.4052 5.72338 19.4052 10.991C19.4052 16.2586 15.2378 20.5289 10.0971 20.5289C4.95642 20.5289 0.789062 16.2586 0.789062 10.991C0.789062 5.72338 4.95642 1.45312 10.0971 1.45312Z" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M0.859375 10.9411L3.72772 7.8467L10.0681 5.33984L16.5951 8.11085L19.2354 10.9534" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M0.859375 10.7741L3.72772 13.8685L10.0681 16.3753L16.5951 13.6043L19.2354 10.7617" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M10.1303 20.2752L7.11051 17.3359L4.66406 10.8391L7.3683 4.15096L10.1424 1.44531" stroke="#A7A7A7" stroke-width="0.636364"/>
                  <path d="M9.96908 20.2752L12.9889 17.3359L15.4354 10.8391L12.7311 4.15096L9.95703 1.44531" stroke="#A7A7A7" stroke-width="0.636364"/>
                </g>
                <defs>
                  <clipPath id="clip0_2076_5875">
                    <rect width="20" height="20" fill="white" transform="translate(0.00390625 0.992188)"/>
                  </clipPath>
                </defs>
              </svg>
              <span>57 граней</span>
            </span>`,
  },
}

const NO_SIZE_NAME = 'не задан'

/**
 * @typedef {{
 *   id: string,
 *   label: string,
 * }} FacetsSelectOption
 */

/**
 * Принимает массив доступных граней для фильтрации
 * Формирует опции дял селекта и значение
 * @param {FacetsSelectOption[]} options
 * @returns {{value: string, options: FacetsSelectOption[]}} Объект со значением и опциями для селекта
 */
export function getFacetsSelect(options) {
  const facetsSelect = {
    options: [],
    value: '',
  }

  if (!options.length) {
    return facetsSelect
  }

  const formattedOptions = options.map((facets) => AVAILABLE_FACETS_SELECT_OPTIONS[facets.id])

  // Если добавятся новые грани, пересмотреть условие
  if (formattedOptions.length === 2) {
    facetsSelect.options = [...formattedOptions, AVAILABLE_FACETS_SELECT_OPTIONS['17,57']]
    facetsSelect.value = AVAILABLE_FACETS_SELECT_OPTIONS['17,57'].id
    return facetsSelect
  }

  facetsSelect.options = formattedOptions
  facetsSelect.value = formattedOptions[0].id

  return facetsSelect
}

/**
 * @typedef {{
 *   size: string,
 *   offerId: string,
 *   amount: number,
 * }} OfferItemSize
 */

/**
 * Создает адаптированный массив торговых предложений по размерам
 * @param {OfferItemSize[]} sizes
 * @returns {array | []} Массив размеров с offerItems-ами или пустой массив
 */
export function getFormattedSizesList(sizes = []) {
  if (sizes.length) {
    const sizesList = sizes.map((size) => ({
      ...size,
      size: size.size || NO_SIZE_NAME,
      products: [],
      page: {
        currentPage: 1,
        lastPage: 1,
        perPage: 10,
      },
    }))
    return sizesList
  }

  return []
}


/**
 *
 * @param {array} offerItems
 * @param {array} cartOfferItems
 * @returns {array}
 */
export function getOfferItemsWithCartItems(offerItems, cartOfferItems) {
  return offerItems.map(offerItem => {
    const cartOfferItem = cartOfferItems.find(cartOfferItem => String(cartOfferItem.entityId) === offerItem.id)
    return {
      ...offerItem,
      cartItemId: cartOfferItem?.id,
      cartAmount: cartOfferItem?.amount,
    }
  })
}
